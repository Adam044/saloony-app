<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>صالوني — بدون اتصال</title>
  <link rel="icon" href="/images/favicon.ico" />
  <style>
    :root {
      --bg1: #0f172a; /* slate-900 */
      --bg2: #1e293b; /* slate-800 */
      --accent: #06C167; /* Saloony teal */
      --text: #e5e7eb; /* slate-200 */
      --muted: #94a3b8; /* slate-400 */
    }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; background: linear-gradient(135deg, var(--bg1), var(--bg2)); color: var(--text); min-height: 100vh; }
    .wrap { min-height: 100vh; display: grid; place-items: center; padding: 24px; }
    .card { width: 100%; max-width: 560px; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.12); border-radius: 24px; box-shadow: 0 20px 40px rgba(0,0,0,0.35); overflow: hidden; }
    .header { padding: 28px 24px 8px; display: flex; align-items: center; gap: 12px; }
    .logo { width: 40px; height: 40px; border-radius: 12px; background: rgba(255,255,255,0.12); display: grid; place-items: center; }
    .title { font-weight: 800; font-size: 20px; }
    .content { padding: 8px 24px 24px; }
    .desc { color: var(--muted); margin-top: 8px; }
    .scene { position: relative; height: 180px; margin: 18px 0 8px; display: grid; place-items: center; }
    .device { width: 160px; height: 110px; border-radius: 20px; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.14); box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06); position: relative; }
    .device::before { content:''; position:absolute; inset: -8px -12px; border-radius:24px; background: radial-gradient(120px 80px at 50% 50%, rgba(6,193,103,0.18), transparent 70%); filter: blur(10px); }
    .wifi { position: absolute; inset:0; display: grid; place-items: center; }
    .wave { width: 72px; height: 72px; border-radius: 50%; position: absolute; border: 3px solid var(--accent); opacity: 0.18; animation: wave 2.2s infinite ease-out; }
    .wave:nth-child(2) { width: 98px; height: 98px; animation-delay: .35s; opacity: 0.14; }
    .wave:nth-child(3) { width: 124px; height: 124px; animation-delay: .7s; opacity: 0.10; }
    @keyframes wave { 0% { transform: scale(0.98); opacity: .12; } 50% { transform: scale(1.02); opacity: .22; } 100% { transform: scale(1.06); opacity: .12; } }
    .status { display: inline-flex; align-items: center; gap: 8px; padding: 8px 12px; border-radius: 999px; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.12); font-weight: 700; }
    .dot { width:10px; height:10px; border-radius:50%; background: #ef4444; box-shadow: 0 0 0 6px rgba(239,68,68,0.15); }
    .actions { display:flex; gap:12px; margin-top:16px; }
    .btn { flex:1; display:inline-flex; align-items:center; justify-content:center; gap:8px; border-radius:16px; padding:14px 18px; font-weight:800; cursor:pointer; border:1px solid rgba(255,255,255,0.2); color: var(--bg1); background: var(--accent); box-shadow: 0 12px 28px rgba(6,193,103,0.35); transition: filter .2s ease; }
    .btn:hover { filter: brightness(1.06); }
    .foot { padding: 12px 24px 24px; color: var(--muted); font-size: 13px; }
    .shake { animation: shake .4s ease; }
    @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(6px); } 50% { transform: translateX(-6px); } 75% { transform: translateX(4px); } 100% { transform: translateX(0); } }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="dialog" aria-labelledby="title" aria-describedby="desc">
      <div class="header">
        <div class="logo">
          <img src="/images/Saloony-app_icon.png" alt="Saloony" style="width:24px;height:24px;border-radius:6px;" />
        </div>
        <div class="title" id="title">لا يوجد اتصال بالإنترنت</div>
      </div>
      <div class="content">
        <div class="scene">
          <div class="device">
            <div class="wifi">
              <svg viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12a11 11 0 0 1 14 0"/><path d="M8.5 15.5a7 7 0 0 1 7 0"/><path d="M12 19h0"/></svg>
            </div>
          </div>
        </div>
        <p class="desc" id="desc">تحقق من الشبكة ثم اضغط إعادة المحاولة.</p>
        <div class="status"><span class="dot"></span> بدون اتصال</div>
        <div class="actions">
          <button class="btn" id="retryBtn" type="button">إعادة المحاولة</button>
        </div>
      </div>
      <div class="foot">سيتم العودة تلقائياً عند توفر الاتصال.</div>
    </div>
  </div>
  <script>
    function ping(){var c=new AbortController();var t=setTimeout(function(){try{c.abort()}catch(_){}} ,2000);return fetch('/',{method:'HEAD',cache:'no-store',signal:c.signal}).finally(function(){clearTimeout(t)})}
    var btn=document.getElementById('retryBtn');
    btn.addEventListener('click',function(){if(navigator.onLine){ping().then(function(r){if(r&&r.ok){var last=null;try{last=sessionStorage.getItem('last_path')}catch(_){ } window.location.href=last||'/' }})} else {var card=document.querySelector('.card');card.classList.remove('shake');void card.offsetWidth;card.classList.add('shake');setTimeout(function(){card.classList.remove('shake')},450)}});
    window.addEventListener('online',function(){var last=null;try{last=sessionStorage.getItem('last_path')}catch(_){ } window.location.href=last||'/'});
  </script>
</body>
</html>